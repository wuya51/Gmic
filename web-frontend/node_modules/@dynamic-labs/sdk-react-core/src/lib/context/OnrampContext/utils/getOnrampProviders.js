'use client'
import { __awaiter } from '../../../../../_virtual/_tslib.js';
import { WalletAddressType } from '@dynamic-labs/sdk-api-core';
import { getChainInfo, isBitcoinConnector } from '@dynamic-labs/wallet-connector-core';
import { getOnrampProviders as getOnrampProviders$1 } from '../../../data/api/onramp/onramp.js';
import { getWalletAdditionalAddressByType } from '../../../utils/functions/getWalletAdditionalAddressByType/getWalletAdditionalAddressByType.js';

const DEFAULT_NETWORK = 'evm';
const DEFAULT_CHAIN = '1';
const getOnrampProviders = (_a) => __awaiter(void 0, [_a], void 0, function* ({ address, chainName, environmentId, network, primaryWallet, token, tokenAmount, currency, includeDisabled = false, }) {
    var _b;
    const tempChainNameToUse = (primaryWallet === null || primaryWallet === void 0 ? void 0 : primaryWallet.chain)
        ? (_b = getChainInfo(primaryWallet.chain)) === null || _b === void 0 ? void 0 : _b.name
        : undefined;
    const chainNameToUse = chainName !== null && chainName !== void 0 ? chainName : tempChainNameToUse;
    const bitcoinAddress = primaryWallet &&
        isBitcoinConnector(primaryWallet.connector) &&
        getWalletAdditionalAddressByType(WalletAddressType.Payment, primaryWallet);
    const chainHasNetwork = network && chainNameToUse === DEFAULT_NETWORK;
    let networkToUse;
    if (chainHasNetwork) {
        networkToUse = (network === null || network === void 0 ? void 0 : network.toString()) || DEFAULT_CHAIN;
    }
    else {
        networkToUse = undefined;
    }
    if (!chainNameToUse || (!(primaryWallet === null || primaryWallet === void 0 ? void 0 : primaryWallet.address) && !address)) {
        return [];
    }
    const walletAddress = address || bitcoinAddress || (primaryWallet === null || primaryWallet === void 0 ? void 0 : primaryWallet.address);
    if (!walletAddress)
        return [];
    const providers = yield getOnrampProviders$1({
        chain: chainNameToUse,
        currency,
        environmentId,
        includeDisabled,
        networkId: networkToUse,
        token,
        tokenAmount,
        walletAddress,
    });
    return providers || [];
});

export { getOnrampProviders };
